# Miscellaneous Parsers

### `transact`

    inline fun Grammar.transact (crossinline p: Parser): Boolean

Matches `p`, enforcing the transactionality rule (either suceeds or fails with no side-effects).
Hence, `p` is absolved from having to respect the transactionality rule itself.

### `ignore_errors`

    inline fun Grammar.ignore_errors (crossinline p: Parser): Boolean

Matches `p`, discarding any errors that may have been recorded during its invocation.

### `ignore_errors`

    inline fun Grammar.ignore_errors_if_successful (crossinline p: Parser): Boolean

Matches `p]. If [p` fails, discards any failure that may have been recorded during its execution.

### `perform`

    inline fun Grammar.perform (f: Grammar.() -> Unit): Boolean

Runs `f` then succeed.

### `log`

    fun Grammar.log (str: String): Boolean

Prints the current input position and `str`, then succeed.

### `contain`

    inline fun Grammar.contain (noinline failure: () -> String, crossinline p: Parser): Boolean

Matches `p]. If [p` fails, discards any failure that may have been recorded during its execution,
and registers a failure with the message generated by `failure` instead.

### `transact_contain`

    inline fun Grammar.transact_contain (noinline failure: () -> String, crossinline p: Parser): Boolean

Equivalent to `contain(failure) { transact(p) }` ([`contain`], [`transact`])

[`contain`]: #contain
[`transact`]: #transact

### `catch`

    inline fun Grammar.catch (crossinline p: Parser): Boolean

Matches `p`, catching any exception it might throws.

This parser fails if it catches an exception which uses the input position at the time
the exception is thrown. If the caught exception is an
[`AutumnLogicException`], registers the failure it carries, otherwise registers a
[`CaughtException`].

[`AutumnLogicException`]: TODO
[`CaughtException`]: TODO

### `catch_contain`

    inline fun Grammar.catch_contain (crossinline p: Parser): Boolean

Matches `p], catching any exception it might throws. If [p` throws an exception, discards any
failure that may have been recorded during its execution, and registers an exception in the
same manner as `catch` instead.

### `inner`

    inline fun Grammar.inner (crossinline gather: Parser, crossinline refine: (String) -> Boolean): Boolean

Matches input using `gather` then, if successful, calls `refine` with the matching input
and use the result as the result of the parse.

### `until_inner`

    inline fun Grammar.until_inner (crossinline terminator: Parser, crossinline refine: (String) -> Boolean): Boolean

Matches all characters until `terminator` (also matched).

Then, if successful, all characters matched in this manner (excluding `terminator`) are collected
in a string, which is passed to `refine`, whose result is the result of the parse.

The exclusion of the terminator is what makes this different from [`inner`] and closer
to [`gobble`].

[`inner`]: #inner
[`gobble`]: stack.md#gobble

### `SubGrammar (class)`

    class SubGrammar (
        val grammar: Grammar,
        val sub_grammar: Grammar,
        val completion: Grammar.(Grammar) -> Unit)
        : Parser

A parser that matches the same thing as parsing `sub_grammar` with the remainder of the input
would. If successful, the `completion` function is called, passing it `sub_grammar`.

The default action for the completion function is to push the top of the value stack of the
sub-grammar on top on the value stack of the current grammar.

### `sub_grammar`

    fun Grammar.sub_grammar (
        sub_grammar: Grammar,
        completion: Grammar.(Grammar) -> Unit = { stack.push(it.stack[0]) })
        : Parser

(Syntactic sugar for [`SubGrammar`])

[`SubGrammar`]: #subgrammar-class

A parser that matches the same thing as parsing `sub_grammar` with the remainder of the input
would. If successful, the `completion` function is called, passing it `sub_grammar`.

The default action for the completion function is to push the top of the value stack of the
sub-grammar on top on the value stack of the current grammar.

### `sub_grammar_inner`

    fun Grammar.sub_grammar_inner (
        sub_grammar: Grammar,
        completion: Grammar.(Grammar) -> Unit = { stack.push(it.stack[0]) })
        : (String) -> Boolean

A version of [`sub_grammar`] that can be used in conjunction with [`inner`] or [`until_inner`]:
it runs the sub-grammar on the matched text.

[`sub_grammar`]: #sub_grammar
[`until_inner`]: #until_inner

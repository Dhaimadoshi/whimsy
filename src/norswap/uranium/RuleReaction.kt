package norswap.uranium

/**
 * A [Reaction] created by a [Rule].
 */
class RuleReaction <N: Node> (

    // ---------------------------------------------------------------------------------------------

    /**
     * The rule that created this reaction.
     */
    val rule: Rule<N>,

    // ---------------------------------------------------------------------------------------------

    override val node: N,

    // ---------------------------------------------------------------------------------------------

    override val reactor: Reactor = ReactorContext.reactor)

    // ---------------------------------------------------------------------------------------------

    : Reaction<N>()

{   // ---------------------------------------------------------------------------------------------

    override val consumed = rule.consumed(node)
    override val provided = rule.provided(node)

    // ---------------------------------------------------------------------------------------------

    override fun trigger()
    {
        rule.apply { this@RuleReaction.compute() }
    }

    // ---------------------------------------------------------------------------------------------
}